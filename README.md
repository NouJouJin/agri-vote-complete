# ğŸŒ¾ AGRI VISION 2125 æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ 

[![Deploy to Firebase](https://github.com/YOUR_USERNAME/agri-vote-complete/actions/workflows/deploy.yml/badge.svg)](https://github.com/YOUR_USERNAME/agri-vote-complete/actions/workflows/deploy.yml)
[![Firebase Hosting](https://img.shields.io/badge/Firebase-Hosting-orange)](https://agri-vote-complete.web.app)
[![Firebase Functions](https://img.shields.io/badge/Firebase-Functions-yellow)](https://console.firebase.google.com/project/agri-vote-complete/functions)

## ğŸ“– æ¦‚è¦

AGRI VISION 2125ã®ä½œå“æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ã‚»ã‚­ãƒ¥ã‚¢ãª1äºº1ç¥¨åˆ¶ã®æŠ•ç¥¨æ©Ÿèƒ½ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›†è¨ˆã€Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆè‡ªå‹•è¨˜éŒ²ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

- ğŸ” **Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼**ï¼ˆFirebase Authenticationï¼‰
- ğŸ—³ï¸ **1äºº1ç¥¨åˆ¶æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ **ï¼ˆé‡è¤‡æŠ•ç¥¨é˜²æ­¢ï¼‰
- ğŸ“Š **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›†è¨ˆè¡¨ç¤º**ï¼ˆFirestore ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼‰
- ğŸ“‹ **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆè‡ªå‹•è¨˜éŒ²**ï¼ˆFirebase Functions + GASé€£æºï¼‰
- ğŸ›¡ï¸ **åŒ…æ‹¬çš„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–**ï¼ˆXSSå¯¾ç­–ã€å…¥åŠ›æ¤œè¨¼ã€åˆè¨€è‘‰èªè¨¼ï¼‰
- ğŸš€ **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**ï¼ˆGitHub Actionsï¼‰

## ğŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **HTML5 + Vanilla JavaScript**ï¼ˆSPAæ§‹æˆï¼‰
- **Vite**ï¼ˆãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼‰
- **Firebase SDK**ï¼ˆèªè¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Firebase Firestore**ï¼ˆNoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
- **Firebase Functions v2**ï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼‰
- **Firebase Authentication**ï¼ˆèªè¨¼ï¼‰
- **Firebase Hosting**ï¼ˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰

### å¤–éƒ¨é€£æº
- **Google Apps Script**ï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ“ä½œï¼‰
- **Google Sheets**ï¼ˆæŠ•ç¥¨çµæœè¨˜éŒ²ï¼‰

### é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- **GitHub Actions**ï¼ˆCI/CDï¼‰
- **ESLint + Prettier**ï¼ˆã‚³ãƒ¼ãƒ‰å“è³ªï¼‰
- **dotenv**ï¼ˆç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼‰

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ
- Node.js 18ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Firebase CLI
- Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone https://github.com/YOUR_USERNAME/agri-vote-complete.git
cd agri-vote-complete
```

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
npm install
```

3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
```bash
# .env.exampleã‚’.envã«ã‚³ãƒ”ãƒ¼
cp .env.example .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å®Ÿéš›ã®å€¤ã‚’è¨­å®š
```

4. **Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š**
```bash
firebase login
firebase use agri-vote-complete
```

5. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
```bash
npm run dev
```

## ğŸ”§ ãƒ‡ãƒ—ãƒ­ã‚¤

### è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ¨å¥¨ï¼‰
- `main`ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•çš„ã«Firebase Hostingã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™
- ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆæ™‚ã¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒãŒä½œæˆã•ã‚Œã¾ã™

### æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
npm run deploy:hosting

# Functionsã®ã¿  
npm run deploy:functions

# å…¨ä½“
npm run deploy:all
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å®Ÿè£…æ¸ˆã¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
- âœ… **èªè¨¼å¿…é ˆåˆ¶å¾¡**ï¼ˆæœªèªè¨¼æ™‚ã¯æŠ•ç¥¨ä¸å¯ï¼‰
- âœ… **1äºº1ç¥¨åˆ¶é™**ï¼ˆFirestore Rules + ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- âœ… **XSSå¯¾ç­–**ï¼ˆHTMLã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼‰
- âœ… **å…¥åŠ›å€¤æ¤œè¨¼**ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆãƒ»ãƒãƒƒã‚¯ä¸¡æ–¹ï¼‰
- âœ… **åˆè¨€è‘‰èªè¨¼**ï¼ˆFunctions â†” GASé–“ï¼‰
- âœ… **ç’°å¢ƒå¤‰æ•°ç®¡ç†**ï¼ˆæ©Ÿå¯†æƒ…å ±ã®åˆ†é›¢ï¼‰
- âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼**ï¼ˆXSSã€Clickjackingå¯¾ç­–ï¼‰

### Firestore ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
```javascript
// æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿ï¼šèª­ã¿å–ã‚Šã¯å…¨å“¡ã€ä½œæˆã¯èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿
match /votes/{userId} {
  allow read: if true;
  allow create: if request.auth != null 
                && request.auth.uid == userId
                && validateVoteData(request.resource.data);
  allow update, delete: if false;
}
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### Firestore
```
votes/{userId}
â”œâ”€â”€ votedFor: string     # æŠ•ç¥¨å…ˆä½œå“ID
â””â”€â”€ timestamp: timestamp # æŠ•ç¥¨æ—¥æ™‚
```

### Google Sheets
| åˆ— | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | ä¾‹ |
|----|------------|-----|
| A | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— | 2024-07-10 14:30:25 |
| B | ãƒ¦ãƒ¼ã‚¶ãƒ¼å | å±±ç”°å¤ªéƒ |
| C | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | taro@example.com |
| D | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | abc123xyz |
| E | æŠ•ç¥¨ä½œå“ID | work1 |

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å‹•ä½œç¢ºèª
npm run dev

# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build && npm run preview
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
- Firebase Console â†’ Authentication ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª
- Firebase Console â†’ Firestore ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª  
- Google Sheets ã§è¨˜éŒ²ç¢ºèª
- Firebase Console â†’ Functions ã§ãƒ­ã‚°ç¢ºèª

## ğŸ“ ä½œå“ç®¡ç†

ä½œå“ã®è¿½åŠ ãƒ»å¤‰æ›´ã¯ `index.html` ã® `worksData` é…åˆ—ã‚’ç·¨é›†ï¼š

```javascript
const worksData = [
  { 
    id: "work1",
    creator: "ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼A",
    title: "æœªæ¥ã®ç•‘",
    imageUrl: "https://example.com/image1.jpg"
  }
  // æ–°ã—ã„ä½œå“ã‚’è¿½åŠ ...
];
```

## ğŸ“Š ç›£è¦–ãƒ»é‹ç”¨

### ãƒ­ã‚°ç¢ºèª
```bash
# Firebase Functions ãƒ­ã‚°
firebase functions:log

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°
firebase functions:log --only recordVoteToSpreadsheet
```

### è¨­å®šç¢ºèª
```bash
# Firebase Functionsç’°å¢ƒå¤‰æ•°
firebase functions:config:get

# ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒå¤‰æ•°
cat .env
```

## ğŸ¤ è²¢çŒ®

1. ãƒ•ã‚©ãƒ¼ã‚¯ã™ã‚‹
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆ`git checkout -b feature/AmazingFeature`ï¼‰
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆï¼ˆ`git commit -m 'Add some AmazingFeature'`ï¼‰
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆ`git push origin feature/AmazingFeature`ï¼‰
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ [LICENSE](LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [ğŸŒ æœ¬ç•ªç’°å¢ƒ](https://agri-vote-complete.web.app)
- [ğŸ”¥ Firebase Console](https://console.firebase.google.com/project/agri-vote-complete)
- [ğŸ“Š æŠ•ç¥¨çµæœã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ](ãƒªãƒ³ã‚¯ã¯ç®¡ç†è€…ã®ã¿)
- [ğŸ“‹ è¦ä»¶å®šç¾©æ›¸](docs/requirements.md)

## ğŸ‘¥ ãƒãƒ¼ãƒ 

- **é–‹ç™ºè€…**: Your Name
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: AGRI VISION 2125

---

### ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚ˆãã‚ã‚‹å•é¡Œ

**Q: ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„**
A: Firebase Console â†’ Authentication â†’ Settings ã§æ‰¿èªæ¸ˆã¿ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç¢ºèª

**Q: æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿ãŒã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¨˜éŒ²ã•ã‚Œãªã„**  
A: Firebase Functions ãƒ­ã‚°ã§åˆè¨€è‘‰èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª

**Q: GitHub Actionsã§ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹**
A: Repository Secrets ãŒã™ã¹ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

è©³ç´°ã¯ [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](docs/troubleshooting.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚